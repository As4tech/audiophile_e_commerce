{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\audiophile_e_commerce\\\\src\\\\components\\\\Form\\\\Form.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { CartContext } from \"../../store/CartProvider\";\nimport { Link } from \"react-router-dom\";\nimport classes from \"./Form.module.css\";\nimport { CountryDropdown, RegionDropdown } from \"react-country-region-selector\";\nimport { ReactComponent as ReactLogo } from \"@svgr/webpack?-svgo,+titleProp,+ref!../../assets/shared/desktop/payment.svg\";\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CARD_OPTIONS = {\n  iconStyle: \"solid\",\n  style: {\n    base: {\n      iconColor: \"#d87d4a\",\n      color: \"black\",\n      fontWeight: 500,\n      fontFamily: \"inherit\",\n      fontSize: \"16px\",\n      \":-webkit-autofill\": {\n        color: \"#fce883\"\n      },\n      \"::placeholder\": {\n        color: \"rgba(0,0,0,.5)\"\n      }\n    },\n    invalid: {\n      iconColor: \"red\",\n      color: \"red\"\n    }\n  },\n  hidePostalCode: true\n};\n\nconst ResetButton = ({\n  onClick\n}) => /*#__PURE__*/_jsxDEV(Link, {\n  to: \"/\",\n  type: \"button\",\n  className: \"ResetButton\",\n  onClick: onClick,\n  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"32px\",\n    height: \"32px\",\n    viewBox: \"0 0 32 32\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      fill: \"#d87d4a\",\n      d: \"M15,7.05492878 C10.5000495,7.55237307 7,11.3674463 7,16 C7,20.9705627 11.0294373,25 16,25 C20.9705627,25 25,20.9705627 25,16 C25,15.3627484 24.4834055,14.8461538 23.8461538,14.8461538 C23.2089022,14.8461538 22.6923077,15.3627484 22.6923077,16 C22.6923077,19.6960595 19.6960595,22.6923077 16,22.6923077 C12.3039405,22.6923077 9.30769231,19.6960595 9.30769231,16 C9.30769231,12.3039405 12.3039405,9.30769231 16,9.30769231 L16,12.0841673 C16,12.1800431 16.0275652,12.2738974 16.0794108,12.354546 C16.2287368,12.5868311 16.5380938,12.6540826 16.7703788,12.5047565 L22.3457501,8.92058924 L22.3457501,8.92058924 C22.4060014,8.88185624 22.4572275,8.83063012 22.4959605,8.7703788 C22.6452866,8.53809377 22.5780351,8.22873685 22.3457501,8.07941076 L22.3457501,8.07941076 L16.7703788,4.49524351 C16.6897301,4.44339794 16.5958758,4.41583275 16.5,4.41583275 C16.2238576,4.41583275 16,4.63969037 16,4.91583275 L16,7 L15,7 L15,7.05492878 Z M16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 35,\n  columnNumber: 3\n}, this);\n\n_c = ResetButton;\n\nconst CardField = ({\n  onChange\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: classes.cardrow,\n  children: /*#__PURE__*/_jsxDEV(CardElement, {\n    options: CARD_OPTIONS,\n    onChange: onChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 46,\n  columnNumber: 3\n}, this);\n\n_c2 = CardField;\n\nconst Form = ({\n  onFormValid,\n  onProcessing\n}) => {\n  _s();\n\n  const cartCtx = useContext(CartContext); //Button State\n\n  const [active, setActive] = useState(1); //Form State\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [zip, setZip] = useState(\"\");\n  const [country, setCountry] = useState(\"\");\n  const [region, setRegion] = useState(\"\");\n  const [nameIsValid, setNameIsValid] = useState(true);\n  const [emailIsValid, setEmailIsValid] = useState(true);\n  const [phoneIsValid, setPhoneIsValid] = useState(true);\n  const [addressIsValid, setAddressIsValid] = useState(true);\n  const [zipIsValid, setZipIsValid] = useState(true); //Stripe State\n\n  const elements = useElements();\n  const stripe = useStripe();\n  const [error, setError] = useState(null);\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [cardComplete, setCardComplete] = useState(false);\n\n  const valueChangeHandler = event => {\n    switch (event.target.name) {\n      case \"name\":\n        setName(event.target.value.trim());\n        setNameIsValid(event.target.value.trim() !== \"\");\n        break;\n\n      case \"email\":\n        setEmail(event.target.value.trim());\n        setEmailIsValid(event.target.value.includes(\"@\") && event.target.value.trim() !== \"\");\n        break;\n\n      case \"phone\":\n        const reg = /^(\\([0-9]{3}\\)|[0-9]{3}-)[0-9]{3}-[0-9]{4}$/;\n        setPhone(event.target.value.trim());\n        setPhoneIsValid(event.target.value.match(reg));\n        break;\n\n      case \"address\":\n        setAddress(event.target.value.trim());\n        setAddressIsValid(event.target.value.trim() !== \"\");\n        break;\n\n      case \"zip-code\":\n        setZip(event.target.value.trim());\n        setZipIsValid(event.target.value.trim().length === 5);\n        break;\n\n      default:\n        onFormValid(false);\n    }\n  };\n\n  const reset = () => {\n    setError(null);\n    onProcessing(false);\n    setPaymentMethod(null);\n    setName(\"\");\n    setEmail(\"\");\n    setPhone(\"\");\n    setAddress(\"\");\n    setZip(\"\");\n    setCountry(\"\");\n    setRegion(\"\");\n    cartCtx.clearCart();\n  };\n\n  const submitFormHandler = async event => {\n    event.preventDefault();\n    if (!stripe || !elements) return;\n\n    if (error) {\n      elements.getElement(\"card\").focus();\n      return;\n    }\n\n    if (cardComplete) {\n      onProcessing(true);\n    }\n\n    const payload = active === 2 ? \"Cash\" : await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement),\n      billing_details: {\n        name: name,\n        email: email,\n        phone: phone\n      }\n    });\n    onProcessing(false);\n\n    if (payload.error) {\n      setError(payload.error);\n    } else {\n      active === 2 ? setPaymentMethod(payload) : setPaymentMethod(payload.paymentMethod);\n    }\n  };\n\n  if (nameIsValid && emailIsValid && phoneIsValid && addressIsValid && zipIsValid && name && email && phone && address && zip && (active === 1 ? cardComplete : true)) {\n    onFormValid(true);\n  } else {\n    onFormValid(false);\n  }\n\n  return paymentMethod ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.backdrop\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.modal,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.resultTitle,\n        role: \"alert\",\n        children: \"Payment successful\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.resultMessage,\n        children: [\"Thanks for your order. No money was charged, but we generated a PaymentMethod: \", paymentMethod.id ? paymentMethod.id : paymentMethod]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ResetButton, {\n        onClick: reset\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitFormHandler,\n      id: \"checkout\",\n      className: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: classes.section,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Billing Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldodd} ${!nameIsValid ? classes.invalid : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"name\",\n            children: \"Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), !nameIsValid && /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Wrong Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            placeholder: \"Alexei Ward\",\n            onChange: valueChangeHandler,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldeven} ${!emailIsValid ? classes.invalid : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), !emailIsValid && /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Wrong Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"alexei@gmail.com\",\n            onChange: valueChangeHandler,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldodd} ${!phoneIsValid ? classes.invalid : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"phone\",\n            children: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), !phoneIsValid && /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Wrong Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"phone\",\n            placeholder: \"+1202-555-0136\",\n            onChange: valueChangeHandler,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: classes.section,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Shipping Info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldlong} ${!addressIsValid ? classes.invalid : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"address\",\n            children: \"Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this), !addressIsValid && /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Wrong Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"address\",\n            id: \"long\",\n            placeholder: \"1137 Williams Avenue\",\n            onChange: valueChangeHandler,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldodd} ${!zipIsValid ? classes.invalid : \"\"}`,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"zip-code\",\n            children: \"ZIP Code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this), !zipIsValid && /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Wrong Format\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"zip-code\",\n            placeholder: \"10001\",\n            onChange: valueChangeHandler,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CountryDropdown, {\n          value: country,\n          name: \"country\",\n          onChange: val => setCountry(val),\n          classes: ` ${classes.fieldCountry}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RegionDropdown, {\n          country: country,\n          value: region,\n          name: \"region\",\n          onChange: val => setRegion(val),\n          classes: `${classes.fieldodd} ${classes.fieldCity} `\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: classes.section,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Payment Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldodd} `,\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Payment Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldpayment} ${active === 1 && classes.active}`,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"payment\",\n            id: \"payment1\",\n            type: \"radio\",\n            onClick: () => setActive(1),\n            defaultChecked: active === 1 ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"payment1\",\n            children: \"Credit Card\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldpayment} ${active === 2 && classes.active}`,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"payment2\",\n            name: \"payment\",\n            type: \"radio\",\n            onClick: () => setActive(2),\n            defaultChecked: active === 2 ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"payment2\",\n            children: \"Cash on Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${classes.fieldpayment} ${active === 3 && classes.active}`,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"payment3\",\n            name: \"payment\",\n            type: \"radio\",\n            onClick: () => setActive(3),\n            defaultChecked: active === 3 ? true : false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"payment3\",\n            children: \"Mobile Money\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), active === 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.cardgroup,\n            children: /*#__PURE__*/_jsxDEV(CardField, {\n              onChange: e => {\n                setError(e.error);\n                setCardComplete(e.complete);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.cash,\n          children: [/*#__PURE__*/_jsxDEV(ReactLogo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"The \\u2018Cash on Delivery\\u2019 option enables you to pay in cash when our delivery courier arrives at your residence. Just make sure your address is correct so that your order will not be cancelled.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Form, \"zNDDHq8o7uGhxYpCjffSsKooUVE=\", false, function () {\n  return [useElements, useStripe];\n});\n\n_c3 = Form;\nexport default Form;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ResetButton\");\n$RefreshReg$(_c2, \"CardField\");\n$RefreshReg$(_c3, \"Form\");","map":{"version":3,"sources":["D:/Projects/audiophile_e_commerce/src/components/Form/Form.js"],"names":["React","useState","useContext","CartContext","Link","classes","CountryDropdown","RegionDropdown","CardElement","useElements","useStripe","CARD_OPTIONS","iconStyle","style","base","iconColor","color","fontWeight","fontFamily","fontSize","invalid","hidePostalCode","ResetButton","onClick","CardField","onChange","cardrow","Form","onFormValid","onProcessing","cartCtx","active","setActive","name","setName","email","setEmail","phone","setPhone","address","setAddress","zip","setZip","country","setCountry","region","setRegion","nameIsValid","setNameIsValid","emailIsValid","setEmailIsValid","phoneIsValid","setPhoneIsValid","addressIsValid","setAddressIsValid","zipIsValid","setZipIsValid","elements","stripe","error","setError","paymentMethod","setPaymentMethod","cardComplete","setCardComplete","valueChangeHandler","event","target","value","trim","includes","reg","match","length","reset","clearCart","submitFormHandler","preventDefault","getElement","focus","payload","createPaymentMethod","type","card","billing_details","backdrop","modal","resultTitle","resultMessage","id","form","section","fieldodd","fieldeven","fieldlong","val","fieldCountry","fieldCity","fieldpayment","cardgroup","e","complete","cash"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { CartContext } from \"../../store/CartProvider\";\r\nimport { Link } from \"react-router-dom\";\r\nimport classes from \"./Form.module.css\";\r\nimport { CountryDropdown, RegionDropdown } from \"react-country-region-selector\";\r\nimport { ReactComponent as ReactLogo } from \"../../assets/shared/desktop/payment.svg\";\r\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\r\n\r\nconst CARD_OPTIONS = {\r\n  iconStyle: \"solid\",\r\n  style: {\r\n    base: {\r\n      iconColor: \"#d87d4a\",\r\n      color: \"black\",\r\n      fontWeight: 500,\r\n      fontFamily: \"inherit\",\r\n      fontSize: \"16px\",\r\n\r\n      \":-webkit-autofill\": {\r\n        color: \"#fce883\",\r\n      },\r\n      \"::placeholder\": {\r\n        color: \"rgba(0,0,0,.5)\",\r\n      },\r\n    },\r\n    invalid: {\r\n      iconColor: \"red\",\r\n      color: \"red\",\r\n    },\r\n  },\r\n  hidePostalCode: true,\r\n};\r\n\r\nconst ResetButton = ({ onClick }) => (\r\n  <Link to=\"/\" type=\"button\" className=\"ResetButton\" onClick={onClick}>\r\n    <svg width=\"32px\" height=\"32px\" viewBox=\"0 0 32 32\">\r\n      <path\r\n        fill=\"#d87d4a\"\r\n        d=\"M15,7.05492878 C10.5000495,7.55237307 7,11.3674463 7,16 C7,20.9705627 11.0294373,25 16,25 C20.9705627,25 25,20.9705627 25,16 C25,15.3627484 24.4834055,14.8461538 23.8461538,14.8461538 C23.2089022,14.8461538 22.6923077,15.3627484 22.6923077,16 C22.6923077,19.6960595 19.6960595,22.6923077 16,22.6923077 C12.3039405,22.6923077 9.30769231,19.6960595 9.30769231,16 C9.30769231,12.3039405 12.3039405,9.30769231 16,9.30769231 L16,12.0841673 C16,12.1800431 16.0275652,12.2738974 16.0794108,12.354546 C16.2287368,12.5868311 16.5380938,12.6540826 16.7703788,12.5047565 L22.3457501,8.92058924 L22.3457501,8.92058924 C22.4060014,8.88185624 22.4572275,8.83063012 22.4959605,8.7703788 C22.6452866,8.53809377 22.5780351,8.22873685 22.3457501,8.07941076 L22.3457501,8.07941076 L16.7703788,4.49524351 C16.6897301,4.44339794 16.5958758,4.41583275 16.5,4.41583275 C16.2238576,4.41583275 16,4.63969037 16,4.91583275 L16,7 L15,7 L15,7.05492878 Z M16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 Z\"\r\n      />\r\n    </svg>\r\n  </Link>\r\n);\r\n\r\nconst CardField = ({ onChange }) => (\r\n  <div className={classes.cardrow}>\r\n    <CardElement options={CARD_OPTIONS} onChange={onChange} />\r\n  </div>\r\n);\r\n\r\nconst Form = ({ onFormValid, onProcessing }) => {\r\n  const cartCtx = useContext(CartContext);\r\n  //Button State\r\n  const [active, setActive] = useState(1);\r\n  //Form State\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n  const [zip, setZip] = useState(\"\");\r\n  const [country, setCountry] = useState(\"\");\r\n  const [region, setRegion] = useState(\"\");\r\n\r\n  const [nameIsValid, setNameIsValid] = useState(true);\r\n  const [emailIsValid, setEmailIsValid] = useState(true);\r\n  const [phoneIsValid, setPhoneIsValid] = useState(true);\r\n  const [addressIsValid, setAddressIsValid] = useState(true);\r\n  const [zipIsValid, setZipIsValid] = useState(true);\r\n\r\n  //Stripe State\r\n  const elements = useElements();\r\n  const stripe = useStripe();\r\n  const [error, setError] = useState(null);\r\n  const [paymentMethod, setPaymentMethod] = useState(null);\r\n  const [cardComplete, setCardComplete] = useState(false);\r\n\r\n  const valueChangeHandler = (event) => {\r\n    switch (event.target.name) {\r\n      case \"name\":\r\n        setName(event.target.value.trim());\r\n        setNameIsValid(event.target.value.trim() !== \"\");\r\n        break;\r\n      case \"email\":\r\n        setEmail(event.target.value.trim());\r\n        setEmailIsValid(\r\n          event.target.value.includes(\"@\") && event.target.value.trim() !== \"\"\r\n        );\r\n        break;\r\n      case \"phone\":\r\n        const reg = /^(\\([0-9]{3}\\)|[0-9]{3}-)[0-9]{3}-[0-9]{4}$/;\r\n        setPhone(event.target.value.trim());\r\n        setPhoneIsValid(event.target.value.match(reg));\r\n        break;\r\n      case \"address\":\r\n        setAddress(event.target.value.trim());\r\n        setAddressIsValid(event.target.value.trim() !== \"\");\r\n        break;\r\n      case \"zip-code\":\r\n        setZip(event.target.value.trim());\r\n        setZipIsValid(event.target.value.trim().length === 5);\r\n        break;\r\n\r\n      default:\r\n        onFormValid(false);\r\n    }\r\n  };\r\n\r\n  const reset = () => {\r\n    setError(null);\r\n    onProcessing(false);\r\n    setPaymentMethod(null);\r\n    setName(\"\");\r\n    setEmail(\"\");\r\n    setPhone(\"\");\r\n    setAddress(\"\");\r\n    setZip(\"\");\r\n    setCountry(\"\");\r\n    setRegion(\"\");\r\n    cartCtx.clearCart();\r\n  };\r\n\r\n  const submitFormHandler = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!stripe || !elements) return;\r\n\r\n    if (error) {\r\n      elements.getElement(\"card\").focus();\r\n      return;\r\n    }\r\n\r\n    if (cardComplete) {\r\n      onProcessing(true);\r\n    }\r\n\r\n    const payload =\r\n      active === 2\r\n        ? \"Cash\"\r\n        : await stripe.createPaymentMethod({\r\n            type: \"card\",\r\n            card: elements.getElement(CardElement),\r\n            billing_details: {\r\n              name: name,\r\n              email: email,\r\n              phone: phone,\r\n            },\r\n          });\r\n\r\n    onProcessing(false);\r\n\r\n    if (payload.error) {\r\n      setError(payload.error);\r\n    } else {\r\n      active === 2\r\n        ? setPaymentMethod(payload)\r\n        : setPaymentMethod(payload.paymentMethod);\r\n    }\r\n  };\r\n\r\n  if (\r\n    nameIsValid &&\r\n    emailIsValid &&\r\n    phoneIsValid &&\r\n    addressIsValid &&\r\n    zipIsValid &&\r\n    name &&\r\n    email &&\r\n    phone &&\r\n    address &&\r\n    zip &&\r\n    (active === 1 ? cardComplete : true)\r\n  ) {\r\n    onFormValid(true);\r\n  } else {\r\n    onFormValid(false);\r\n  }\r\n\r\n  return paymentMethod ? (\r\n    <>\r\n      <div className={classes.backdrop}></div>\r\n      <div className={classes.modal}>\r\n        <div className={classes.resultTitle} role=\"alert\">\r\n          Payment successful\r\n        </div>\r\n        <div className={classes.resultMessage}>\r\n          Thanks for your order. No money was charged, but we generated a\r\n          PaymentMethod: {paymentMethod.id ? paymentMethod.id : paymentMethod}\r\n        </div>\r\n        <ResetButton onClick={reset} />\r\n      </div>\r\n    </>\r\n  ) : (\r\n    <>\r\n      <form onSubmit={submitFormHandler} id=\"checkout\" className={classes.form}>\r\n        <h1>Checkout</h1>\r\n        <section className={classes.section}>\r\n          <h3>Billing Details</h3>\r\n          <div\r\n            className={`${classes.fieldodd} ${\r\n              !nameIsValid ? classes.invalid : \"\"\r\n            }`}\r\n          >\r\n            <label htmlFor=\"name\">Name</label>\r\n            {!nameIsValid && <h5>Wrong Format</h5>}\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              placeholder=\"Alexei Ward\"\r\n              onChange={valueChangeHandler}\r\n              required\r\n            />\r\n          </div>\r\n          <div\r\n            className={`${classes.fieldeven} ${\r\n              !emailIsValid ? classes.invalid : \"\"\r\n            }`}\r\n          >\r\n            <label htmlFor=\"email\">Email Address</label>\r\n            {!emailIsValid && <h5>Wrong Format</h5>}\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"alexei@gmail.com\"\r\n              onChange={valueChangeHandler}\r\n              required\r\n            />\r\n          </div>\r\n          <div\r\n            className={`${classes.fieldodd} ${\r\n              !phoneIsValid ? classes.invalid : \"\"\r\n            }`}\r\n          >\r\n            <label htmlFor=\"phone\">Phone Number</label>\r\n            {!phoneIsValid && <h5>Wrong Format</h5>}\r\n            <input\r\n              type=\"text\"\r\n              name=\"phone\"\r\n              placeholder=\"+1202-555-0136\"\r\n              onChange={valueChangeHandler}\r\n              required\r\n            />\r\n          </div>\r\n        </section>\r\n        <section className={classes.section}>\r\n          <h3>Shipping Info</h3>\r\n          <div\r\n            className={`${classes.fieldlong} ${\r\n              !addressIsValid ? classes.invalid : \"\"\r\n            }`}\r\n          >\r\n            <label htmlFor=\"address\">Address</label>\r\n            {!addressIsValid && <h5>Wrong Format</h5>}\r\n            <input\r\n              type=\"text\"\r\n              name=\"address\"\r\n              id=\"long\"\r\n              placeholder=\"1137 Williams Avenue\"\r\n              onChange={valueChangeHandler}\r\n              required\r\n            />\r\n          </div>\r\n          <div\r\n            className={`${classes.fieldodd} ${\r\n              !zipIsValid ? classes.invalid : \"\"\r\n            }`}\r\n          >\r\n            <label htmlFor=\"zip-code\">ZIP Code</label>\r\n            {!zipIsValid && <h5>Wrong Format</h5>}\r\n            <input\r\n              type=\"text\"\r\n              name=\"zip-code\"\r\n              placeholder=\"10001\"\r\n              onChange={valueChangeHandler}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <CountryDropdown\r\n            value={country}\r\n            name=\"country\"\r\n            onChange={(val) => setCountry(val)}\r\n            classes={` ${classes.fieldCountry}`}\r\n          />\r\n\r\n          <RegionDropdown\r\n            country={country}\r\n            value={region}\r\n            name=\"region\"\r\n            onChange={(val) => setRegion(val)}\r\n            classes={`${classes.fieldodd} ${classes.fieldCity} `}\r\n          />\r\n        </section>\r\n        <section className={classes.section}>\r\n          <h3>Payment Details</h3>\r\n          <div className={`${classes.fieldodd} `}>\r\n            <h4>Payment Method</h4>\r\n          </div>\r\n          <div\r\n            className={`${classes.fieldpayment} ${\r\n              active === 1 && classes.active\r\n            }`}\r\n          >\r\n            <input\r\n              name=\"payment\"\r\n              id=\"payment1\"\r\n              type=\"radio\"\r\n              onClick={() => setActive(1)}\r\n              defaultChecked={active === 1 ? true : false}\r\n            />\r\n            <label htmlFor=\"payment1\">Credit Card</label>\r\n          </div>\r\n          <div\r\n            className={`${classes.fieldpayment} ${\r\n              active === 2 && classes.active\r\n            }`}\r\n          >\r\n            <input\r\n              id=\"payment2\"\r\n              name=\"payment\"\r\n              type=\"radio\"\r\n              onClick={() => setActive(2)}\r\n              defaultChecked={active === 2 ? true : false}\r\n            />\r\n            <label htmlFor=\"payment2\">Cash on Delivery</label>\r\n          </div>\r\n          \r\n          <div\r\n            className={`${classes.fieldpayment} ${\r\n              active === 3 && classes.active\r\n            }`}\r\n          >\r\n            <input\r\n              id=\"payment3\"\r\n              name=\"payment\"\r\n              type=\"radio\"\r\n              onClick={() => setActive(3)}\r\n              defaultChecked={active === 3 ? true : false}\r\n            />\r\n            <label htmlFor=\"payment3\">Mobile Money</label>\r\n          </div>\r\n\r\n          {active === 1 ? (\r\n            <>\r\n              <div className={classes.cardgroup}>\r\n                <CardField\r\n                  onChange={(e) => {\r\n                    setError(e.error);\r\n                    setCardComplete(e.complete);\r\n                  }}\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className={classes.cash}>\r\n              <ReactLogo />\r\n              <p>\r\n                The ‘Cash on Delivery’ option enables you to pay in cash when\r\n                our delivery courier arrives at your residence. Just make sure\r\n                your address is correct so that your order will not be\r\n                cancelled.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </section>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"]},"metadata":{},"sourceType":"module"}